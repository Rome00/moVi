import{d as y,a as h,p as f,b as v,c as k,r as C,o as l,e as r,f as s,u as c,t as u,F as _,g as x,h as p,w as $,i as S,j as M,k as j}from"./index.852570de.js";import{m as B,C as N}from"./MediaSize.b8214e7f.js";import{_ as z}from"./RatingStar.f2fc0cf8.js";const b=y("MovieStore",{state:()=>({genres:null,movies:null}),getters:{},actions:{async getGenres(){return new Promise(t=>{h.get("https://api.themoviedb.org/3/genre/movie/list?api_key=da4d11234eb9fbd69aa0dd7c6323eff9").then(e=>{this.genres=e.data.genres,t(!0)})})},async getMovies(t){const e=f();e.loading=!0,await h.get("https://api.themoviedb.org/3/discover/movie?api_key=da4d11234eb9fbd69aa0dd7c6323eff9&language=en-US&sort_by=popularity.desc&with_original_language=en&page="+t).then(o=>{e.page=t,e.total_pages=o.data.total_pages,e.total_results=o.data.total_results,this.movies=o.data.results,e.loading=!1})}}}),I={class:"relative flex h-full max-w-[342px] overflow-hidden rounded-md shadow-md shadow-slate-700 transition-transform delay-100 duration-300 hover:scale-105 xs:max-w-full md:min-h-[350px]"},V={class:"min-w-[184px] bg-gradient-to-t from-black via-black to-transparent md:min-w-full"},F=["src","alt"],G={class:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black via-black to-transparent shadow-inner xs:relative md:absolute"},U={class:"select-none px-3 py-6 text-white"},q={class:"font-raleway text-lg font-bold capitalize"},D={class:"my-4 inline-flex flex-wrap space-x-1 xs:my-2 sm:my-4"},E={class:"font-raleway"},L=["onClick"],O=v({props:{movie:{type:Object,required:!0}},setup(t){const e=k(()=>"https://image.tmdb.org/t/p/w342"),o=b(),d=i=>{var a;return(a=o.genres.find(m=>m.id===i))==null?void 0:a.name},n=(i,a)=>i.length>a?i.substring(0,a)+"...":i;return(i,a)=>{const m=C("router-link");return l(),r("article",I,[s("figure",V,[s("img",{src:c(e)+t.movie.poster_path,alt:t.movie.original_title},null,8,F)]),s("div",G,[s("div",U,[s("h1",q,u(n(t.movie.original_title,30)),1),s("ul",D,[(l(!0),r(_,null,x(t.movie.genre_ids.slice(0,3),(g,w)=>(l(),r("li",{key:w,class:"table-cell rounded-lg bg-slate-50 px-1.5 align-middle text-xs text-slate-800"},[s("span",E,u(d(g)),1)]))),128))]),s("p",null,u(n(t.movie.overview,100)),1),p(z,{rating:t.movie.vote_average},null,8,["rating"]),p(m,{custom:"",to:{name:"media",params:{id:t.movie.id,media:i.$route.name}}},{default:$(({navigate:g})=>[s("button",{class:"bottom-2 right-6 float-right my-4 rounded-2xl px-6 py-1.5 capitalize text-indigo-400 outline-none ring-2 ring-indigo-400 transition-colors duration-300 hover:bg-indigo-400 hover:text-white xs:absolute md:relative md:right-0",onClick:g}," read more ",8,L)]),_:1},8,["to"])])])])}}}),P={class:"bg-white"},R={class:"h-full w-full py-10"},A={class:"container mx-auto px-8 xs:max-w-full md:container"},H={class:"w-full"},J={class:"grid grid-cols-12 gap-y-8 justify-self-center sm:gap-10 md:gap-14"},W=v({setup(t){const e=b(),o=f();e.getGenres().then(n=>{n&&e.getMovies(o.page)});const{width:d}=B();return S(()=>o.page,function(n){e.getMovies(n)}),(n,i)=>(l(),r("main",P,[c(e).movies?(l(),M(N,{key:0,indicators:c(d)>640,movies:c(e).movies.slice(0,10),height:"h-[450px] 2xl:h-[600px]"},null,8,["indicators","movies"])):j("",!0),s("div",R,[s("div",A,[s("div",H,[s("div",J,[(l(!0),r(_,null,x(c(e).movies,a=>(l(),r("div",{key:a.id,class:"col-span-12 justify-self-center md:col-span-6 lg:col-span-4 2xl:col-span-3"},[p(O,{movie:a},null,8,["movie"])]))),128))])])])])]))}});export{W as default};
